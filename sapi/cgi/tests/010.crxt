--TEST--
Bug #45860 (header() function fails to correctly replace all Status lines)
--SKIPIF--
<?crx include "skipif.inc"; ?>
--FILE--
<?crx

include "include.inc";

$crx = get_cgi_path();
reset_env_vars();

$f = tempnam(sys_get_temp_dir(), 'cgitest');

putenv("TRANSLATED_PATH=".$f."/x");
putenv("SCRIPT_FILENAME=".$f."/x");
file_put_contents($f, '<?crx
header("HTTP/1.1 403 Forbidden");
header("Status: 403 Also Forbidden");
?>');

echo (`$crx -n $f`);

file_put_contents($f, '<?crx
header("HTTP/1.1 403 Forbidden");
?>');

echo (`$crx -n $f`);

file_put_contents($f, '<?crx
header("Status: 403 Also Forbidden");
?>');

echo (`$crx -n $f`);

echo "Done\n";

@unlink($f);
?>
--EXPECTF--
Status: 403 Forbidden
X-Powered-By: CRX/%s
Content-type: text/html; charset=UTF-8

Status: 403 Forbidden
X-Powered-By: CRX/%s
Content-type: text/html; charset=UTF-8

X-Powered-By: CRX/%s
Status: 403 Also Forbidden
Content-type: text/html; charset=UTF-8

Done
