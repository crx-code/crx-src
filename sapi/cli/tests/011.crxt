--TEST--
syntax check
--SKIPIF--
<?crx include "skipif.inc"; ?>
--FILE--
<?crx

$crx = getenv('TEST_CRX_EXECUTABLE_ESCAPED');

$filename = __DIR__."/011.test.crx";
$filename_escaped = escapeshellarg($filename);

$code = '
<?crx

$test = "var";

class test {
    private $var;
}

echo test::$var;

?>
';

file_put_contents($filename, $code);

var_dump(`$crx -n -l $filename_escaped`);
var_dump(`$crx -n -l some.unknown`);

$code = '
<?crx

class test
    private $var;
}

?>
';

file_put_contents($filename, $code);

var_dump(`$crx -n -l $filename_escaped`);

@unlink($filename);

echo "Done\n";
?>
--EXPECTF--
string(%d) "No syntax errors detected in %s011.test.crx
"
Could not open input file: some.unknown
NULL
string(%d) "
Parse error: %s expecting %s{%s in %s on line %d
Errors parsing %s011.test.crx
"
Done
