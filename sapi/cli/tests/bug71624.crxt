--TEST--
Bug #61977 Test that -R properly sets argi and argn
--SKIPIF--
<?crx
include "skipif.inc";
?>
--FILE--
<?crx

$crx = getenv('TEST_CRX_EXECUTABLE_ESCAPED');

$filename_txt = __DIR__ . DIRECTORY_SEPARATOR . "bug71624.test.txt";
$filename_txt_escaped = escapeshellarg($filename_txt);

$txt = 'foo
test
hello
';

file_put_contents($filename_txt, $txt);

$test_args = ['$argi', '$argn'];
foreach ($test_args as $test_arg) {
    if (substr(CRX_OS, 0, 3) == 'WIN') {
        var_dump(`type $filename_txt_escaped | $crx -n -R "echo $test_arg . CRX_EOL;"`);
    } else {
        var_dump(`cat $filename_txt_escaped | $crx -n -R 'echo $test_arg . CRX_EOL;'`);
    }
}

@unlink($filename_txt);

echo "Done\n";
?>
--EXPECT--
string(6) "1
2
3
"
string(15) "foo
test
hello
"
Done
