--TEST--
executing a code with -R
--SKIPIF--
<?crx
include "skipif.inc";
if (substr(CRX_OS, 0, 3) == 'WIN') {
    die ("skip not for Windows");
}
?>
--FILE--
<?crx

$crx = getenv('TEST_CRX_EXECUTABLE_ESCAPED');

$filename_txt = __DIR__."/010.test.txt";
$filename_txt_escaped = escapeshellarg($filename_txt);

$txt = '
test
hello
';

file_put_contents($filename_txt, $txt);

var_dump(`cat $filename_txt_escaped | $crx -n -R "var_dump(1);"`);

@unlink($filename_txt);

echo "Done\n";
?>
--EXPECT--
string(21) "int(1)
int(1)
int(1)
"
Done
