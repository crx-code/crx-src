--TEST--
FPM: Set arrays in configuration
--SKIPIF--
<?crx include "skipif.inc"; ?>
--FILE--
<?crx

require_once "tester.inc";

$cfg = <<<EOT
[global]
error_log = {{FILE:LOG}}
pid = {{FILE:PID}}
[unconfined]
listen = {{ADDR}}
access.suppress_path[] = /ping
access.suppress_path[] = /health_check.crx
pm = static
pm.max_children = 5
crx_value[error_reporting] = E_ALL
crx_value[date.timezone] = Europe/London
crx_admin_value[disable_functions] = eval
crx_flag[display_errors] = On
crx_admin_flag[log_errors] = 1
EOT;

$tester = new FPM\Tester($cfg);
$tester->start(['-tt']);
$tester->expectLogConfigOptions([
    'access.suppress_path[] = /ping',
    'access.suppress_path[] = /health_check.crx',
    'crx_value[error_reporting] = 32767',
    'crx_value[date.timezone] = Europe/London',
    'crx_value[display_errors] = 1',
    'crx_admin_value[disable_functions] = eval',
    'crx_admin_value[log_errors] = 1',
]);


?>
Done
--EXPECT--
Done
--CLEAN--
<?crx
require_once "tester.inc";
FPM\Tester::clean();
?>
