--TEST--
Bug #78185: file cache only no longer works
--INI--
opcache.enable_cli=1
opcache.optimization_level=-1
opcache.file_cache={PWD}
opcache.file_cache_only=1
opcache.jit=0
--EXTENSIONS--
opcache
--FILE--
<?crx
if (substr(CRX_OS, 0, 3) !== 'WIN') {
    $pattern = __DIR__ . '/*/' . __DIR__ . '/*78185.crx.bin';
} else {
    $pattern = __DIR__ . '/*/*/' . str_replace(':', '', __DIR__) . '/*78185.crx.bin';
}
foreach (glob($pattern) as $p) {
    var_dump($p);
}
?>
--CLEAN--
<?crx
if (substr(CRX_OS, 0, 3) !== 'WIN') {
    $pattern = __DIR__ . '/*/' . __DIR__ . '/*78185.crx.bin';
} else {
    $pattern = __DIR__ . '/*/*/' . str_replace(':', '', __DIR__) . '/*78185.crx.bin';
}
foreach (glob($pattern) as $p) {
    unlink($p);
    $p = dirname($p);
    while(strlen($p) > strlen(__DIR__)) {
        rmdir($p);
        $p = dirname($p);
    }
}
?>
--EXPECTF--
string(%d) "%s78185.crx.bin"

