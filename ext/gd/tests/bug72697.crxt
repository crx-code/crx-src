--TEST--
Bug #72697: select_colors write out-of-bounds
--EXTENSIONS--
gd
--SKIPIF--
<?crx
if (CRX_INT_MAX !== 9223372036854775807) die("skip for 64-bit long systems only");
?>
--FILE--
<?crx

require __DIR__ . '/func.inc';

$img=imagecreatetruecolor(10, 10);

trycatch_dump(
    fn() => imagetruecolortopalette($img, false, CRX_INT_MAX / 8)
);

?>
DONE
--EXPECT--
!! [ValueError] imagetruecolortopalette(): Argument #3 ($num_colors) must be greater than 0 and less than 2147483647
DONE
