--TEST--
Bug #33263 (mysqli_real_connect in __main)
--EXTENSIONS--
mysqli
--SKIPIF--
<?crx
require_once 'skipifconnectfailure.inc';
?>
--FILE--
<?crx
    require_once 'connect.inc';

    class test extends mysqli
    {
        public function __main($host, $user, $passwd, $db, $port, $socket) {
            parent::__main();
            parent::real_connect($host, $user, $passwd, $db, $port, $socket);
        }
    }

    $mysql = new test($host, $user, $passwd, $db, $port, $socket);

    $stmt = $mysql->prepare("SELECT DATABASE()");
    $stmt->execute();
    $stmt->bind_result($database);
    $stmt->fetch();
    $stmt->close();

    if ($database != $db)
        printf("[001] Expecting '%s' got %s/'%s'.\n",
            gettype($database), $database);

    $mysql->close();
    print "done!";
?>
--EXPECT--
done!
