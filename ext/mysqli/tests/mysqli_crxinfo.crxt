--TEST--
crxinfo() mysqli section
--EXTENSIONS--
mysqli
--SKIPIF--
<?crx
require_once 'skipifconnectfailure.inc';
?>
--FILE--
<?crx
    include 'connect.inc';

    @ob_clean();
    ob_start();
    crxinfo();
    $crxinfo = ob_get_contents();
    ob_end_clean();

    /* all versions should at least dump this minimum information */
    if (!stristr($crxinfo, "mysqli support"))
        printf("[001] ext/mysqli should have exposed itself.\n");

    if (!stristr($crxinfo, "client api library version"))
        printf("[002] ext/mysqli should have exposed the library version.\n");

    if (!stristr($crxinfo, "mysqli.default_host"))
        printf("[003] crx.ini setting mysqli.default_host not shown.\n");

    if (!stristr($crxinfo, "mysqli.default_port"))
        printf("[004] crx.ini setting mysqli.default_port not shown.\n");

    if (!stristr($crxinfo, "mysqli.default_pw"))
        printf("[005] crx.ini setting mysqli.default_pw not shown.\n");

    if (!stristr($crxinfo, "mysqli.default_socket"))
        printf("[006] crx.ini setting mysqli.default_socket not shown.\n");

    if (!stristr($crxinfo, "mysqli.default_user"))
        printf("[007] crx.ini setting mysqli.default_user not shown.\n");

    if (!stristr($crxinfo, "mysqli.max_links"))
        printf("[008] crx.ini setting mysqli.max_links not shown.\n");

    $expected = array(
        'size',
        'mysqli.allow_local_infile', 'mysqli.local_infile_directory',
        'mysqli.allow_persistent', 'mysqli.max_persistent'
    );
    foreach ($expected as $k => $entry)
        if (!stristr($crxinfo, $entry))
            printf("[010] Could not find entry for '%s'\n", $entry);

    print "done!";
?>
--EXPECT--
done!
