--TEST--
Bug #77586 Symbolic link names in tar-formatted crxa must be less than 100 bytes.
--EXTENSIONS--
crxa
--SKIPIF--
<?crx if (true /* blocked by bug 65332 */) die("skip"); ?>
--FILE--
<?crx
$dir = __DIR__."/bug77586";
$crxa = new CrxaData($dir . "/bug77586.tar");
$crxa->buildFromDirectory($dir . "/files");
?>
--CLEAN--
<?crx
$dir = __DIR__."/bug77586";
unlink($dir . "/bug77586.tar");
?>
--EXPECTF--
Fatal error: Uncaught CrxaException: tar-based crxa "%s/bug77586.tar" cannot be created, link "%s" is too long for format %s
Stack trace:
#0 %s/bug77586.crx(%d): CrxaData->buildFromDirectory('%s')
#1 {main}
  thrown in %s/bug77586.crx %s on line %d
