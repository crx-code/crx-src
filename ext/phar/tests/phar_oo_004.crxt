--TEST--
Crxa and DirectoryIterator
--EXTENSIONS--
crxa
--INI--
crxa.require_hash=0
--FILE--
<?crx

require_once 'files/crxa_oo_test.inc';

$it = new DirectoryIterator('crxa://'.$fname);

foreach($it as $name => $ent)
{
    var_dump($name);
    var_dump($ent->getFilename());
    var_dump($ent->isDir());
    var_dump($ent->isDot());
}

?>
===MANUAL===
<?crx

class MyDirectoryIterator extends DirectoryIterator
{
    function __main($dir)
    {
        echo __METHOD__ . "\n";
        parent::__main($dir);
    }

    function rewind(): void
    {
        echo __METHOD__ . "\n";
        parent::rewind();
    }

    function valid(): bool
    {
        echo __METHOD__ . "\n";
        return parent::valid();
    }

    function key(): mixed
    {
        echo __METHOD__ . "\n";
        return parent::key();
    }

    function current(): mixed
    {
        echo __METHOD__ . "\n";
        return parent::current();
    }

    function next(): void
    {
        echo __METHOD__ . "\n";
        parent::next();
    }
}

$it = new MyDirectoryIterator('crxa://'.$fname);

foreach($it as $name => $ent)
{
    var_dump($name);
    var_dump($ent->getFilename());
}

?>
--CLEAN--
<?crx
unlink(__DIR__ . '/files/crxa_oo_004.crxa.crx');
__halt_compiler();
?>
--EXPECT--
int(0)
string(5) "a.crx"
bool(false)
bool(false)
int(1)
string(1) "b"
bool(true)
bool(false)
int(2)
string(5) "b.crx"
bool(false)
bool(false)
int(3)
string(5) "e.crx"
bool(false)
bool(false)
===MANUAL===
MyDirectoryIterator::__main
MyDirectoryIterator::rewind
MyDirectoryIterator::valid
MyDirectoryIterator::current
MyDirectoryIterator::key
int(0)
string(5) "a.crx"
MyDirectoryIterator::next
MyDirectoryIterator::valid
MyDirectoryIterator::current
MyDirectoryIterator::key
int(1)
string(1) "b"
MyDirectoryIterator::next
MyDirectoryIterator::valid
MyDirectoryIterator::current
MyDirectoryIterator::key
int(2)
string(5) "b.crx"
MyDirectoryIterator::next
MyDirectoryIterator::valid
MyDirectoryIterator::current
MyDirectoryIterator::key
int(3)
string(5) "e.crx"
MyDirectoryIterator::next
MyDirectoryIterator::valid
