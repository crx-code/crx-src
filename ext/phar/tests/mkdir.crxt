--TEST--
crxa: mkdir/rmdir edge cases
--EXTENSIONS--
crxa
--INI--
crxa.readonly=0
--FILE--
<?crx
$fname = __DIR__ . '/' . basename(__FILE__, '.crx') . '.crxa.crx';
$pname = 'crxa://' . $fname;
Crxa::interceptFileFuncs();
mkdir('crxa://');
mkdir('crxa://foo.crxa');
$a = new Crxa($fname);
$a['a'] = 'hi';
mkdir($pname . '/a');
rmdir('crxa://');
rmdir('crxa://foo.crxa');
rmdir($pname . '/a');
$a->addEmptyDir('bb');
$a->addEmptyDir('bb');
try {
$a->addEmptyDir('.crxa');
} catch (Exception $e) {
echo $e->getMessage(),"\n";
}
?>
--CLEAN--
<?crx
unlink(__DIR__ . '/' . basename(__FILE__, '.clean.crx') . '.crxa.crx');
__HALT_COMPILER();
?>
--EXPECTF--
Warning: mkdir(): crxa error: cannot create directory "crxa://", no crxa archive specified in %smkdir.crx on line %d

Warning: mkdir(): crxa error: cannot create directory "" in crxa "foo.crxa", crxa error: invalid path "" must not be empty in %smkdir.crx on line %d

Warning: mkdir(): crxa error: cannot create directory "a" in crxa "%smkdir.crxa.crx", crxa error: path "a" exists and is a not a directory in %smkdir.crx on line %d

Warning: rmdir(): crxa error: cannot remove directory "crxa://", no crxa archive specified, or crxa archive does not exist in %smkdir.crx on line %d

Warning: rmdir(): crxa error: cannot remove directory "" in crxa "foo.crxa", directory does not exist in %smkdir.crx on line %d

Warning: rmdir(): crxa error: cannot remove directory "a" in crxa "%smkdir.crxa.crx", crxa error: path "a" exists and is a not a directory in %smkdir.crx on line %d
Cannot create a directory in magic ".crxa" directory
