--TEST--
Test dirname() function : regression with path normalization
--SKIPIF--
<?crx
if(substr(CRX_OS, 0, 3) != "WIN")
  die("skip Only valid for Windows");
?>
--FILE--
<?crx

$s = '/crx_sanity/sanity.crx?';
while (dirname($s) == "/crx_sanity" && strlen($s) < 10000) {
    $s .= str_repeat('X', 250);
}

if (strlen($s) >= 10000) {
    echo "OK\n";
} else {
    print "ERROR: " . CRX_EOL;
    var_dump(dirname($s));
    var_dump(strlen($s));
}
?>
--EXPECT--
OK
