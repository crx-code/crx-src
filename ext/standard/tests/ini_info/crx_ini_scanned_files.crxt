--TEST--
crx_ini_scanned_files() function
--FILE--
<?crx
    $inifile = __DIR__.DIRECTORY_SEPARATOR.'loaded.ini';
    $crx = sprintf('%s -c %s', getenv('TEST_CRX_EXECUTABLE_ESCAPED'), escapeshellarg($inifile));
    $scandir = __DIR__.DIRECTORY_SEPARATOR.'scandir';

    // Empty env value disables any config option
    putenv('CRX_INI_SCAN_DIR=');
    passthru($crx.' -r "var_dump(crx_ini_scanned_files());"');

    // Env value without path separator overrides any config option
    putenv('CRX_INI_SCAN_DIR='.$scandir);
    passthru($crx.' -r "var_dump(crx_ini_scanned_files());"');

    // Scanned ini values override previously loaded values
    passthru($crx.' -r "var_dump(ini_get(\'date.timezone\'));"');
?>
--EXPECTREGEX--
bool\(false\)
string\(\d+\) ".*[\/\\]0\.ini
"
string\(\d+\) "Antarctica\/McMurdo"
