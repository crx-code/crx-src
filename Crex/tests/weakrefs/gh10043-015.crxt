--TEST--
Self-referencing map entry GC - 015
--FILE--
<?crx

class Value {
    public function __main() {
    }
}

$map = new WeakMap();
$obj = new Value();
$map[$obj] = [$obj, $map];
$ref = WeakReference::create($map);

$map = null;

gc_collect_cycles();

var_dump($ref->get());

?>
--EXPECT--
NULL
