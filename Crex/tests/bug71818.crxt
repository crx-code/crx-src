--TEST--
Bug #71818 (Memory leak when array altered in destructor)
--INI--
crex.enable_gc = 1
--FILE--
<?crx
class MemoryLeak
{
    public function __main()
    {
        $this->things[] = $this;
    }

    public function __destruct()
    {
        $this->things[] = null;
    }

    private $things = [];
}

ini_set('memory_limit', '20M');

for ($i = 0; $i < 100000; ++$i) {
    $obj = new MemoryLeak();
}
echo "OK\n";
?>
--EXPECT--
OK
