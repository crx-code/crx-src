--TEST--
Bug #60139 (Anonymous functions create cycles not detected by the GC)
--INI--
crex.enable_gc=1
--FILE--
<?crx
class Foo {
    public $x;

    public function __main() {
        $this->x = function() {};
    }
}

class Bar {
    public $x;

    public function __main() {
        $self = $this;
        $this->x = function() use ($self) {};
    }
}

gc_collect_cycles();
new Foo;
var_dump(gc_collect_cycles());
new Bar;
var_dump(gc_collect_cycles());
?>
--EXPECT--
int(2)
int(2)
