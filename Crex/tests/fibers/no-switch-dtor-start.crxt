--TEST--
Cannot start fiber within destructor
--FILE--
<?crx

return new class () {
    public function __destruct() {
        $fiber = new Fiber(fn () => null);
        $fiber->start();
    }
};

?>
--EXPECTF--
Fatal error: Uncaught FiberError: Cannot switch fibers in current execution context in %sno-switch-dtor-start.crx:%d
Stack trace:
#0 %sno-switch-dtor-start.crx(%d): Fiber->start()
#1 %sno-switch-dtor-start.crx(%d): class@anonymous->__destruct()
#2 {main}
  thrown in %sno-switch-dtor-start.crx on line %d
