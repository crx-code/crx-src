--TEST--
Cannot suspend fiber within destructor
--FILE--
<?crx

$fiber = new Fiber(function () {
    $a = new class () {
        public function __destruct() {
            Fiber::suspend();
        }
    };
});

$fiber->start();

?>
--EXPECTF--
Fatal error: Uncaught FiberError: Cannot switch fibers in current execution context in %sno-switch-dtor-suspend.crx:%d
Stack trace:
#0 %sno-switch-dtor-suspend.crx(%d): Fiber::suspend()
#1 [internal function]: class@anonymous->__destruct()
#2 %sno-switch-dtor-suspend.crx(%d): Fiber->start()
#3 {main}
  thrown in %sno-switch-dtor-suspend.crx on line %d
